{%- comment -%}
  Icon snippet
  Usage: {% render 'icon', icon: 'lightning' %}
  
  Now uses dynamic lookup from assets/icons.json
{%- endcomment -%}

{%- assign icon_handle = icon | default: settings.icon -%}
{%- assign current_icon = icons[icon_handle] -%}

<svg class="icon {{ class }}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  {%- if current_icon -%}
    {{ current_icon.body }}
  {%- else -%}
    {%- assign fallback_icon = icons['help-circle'] -%}
    {%- if fallback_icon -%}
      {{ fallback_icon.body }}
    {%- else -%}
      {%- comment -%} Ultimate fallback: simple circle with question mark {%- endcomment -%}
      <circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/>
    {%- endif -%}
  {%- endif -%}
</svg>
