<section
  id="{{ widget.id }}"
  class="widget widget-alternating-rows widget-{{ widget.id }} color-scheme-{{ widget.settings.color_scheme }}"
  {% if widget.settings.color_scheme == 'dark' %}
    style="--widget-bg-color: var(--bg-primary);"
  {% endif %}
  data-widget-id="{{ widget.id }}"
  data-widget-type="alternating-rows"
  {% if widget.index != null %}data-widget-index="{{ widget.index }}"{% endif %}
>
  <style>
    .widget-{{ widget.id }} {
      & .rows-wrapper {
        display: flex;
        flex-direction: column;
        gap: var(--space-4xl);
      }

      & .feature-row {
        display: flex;
        flex-direction: column;
        gap: var(--space-3xl);
        align-items: center;
      }

      & .row-image-wrapper {
        width: 100%;

        & img {
          width: 100%;
          height: auto;
          display: block;
          border-radius: var(--radius-lg);
          border: var(--border-width-thin) solid var(--border-color);
        }
      }

      & .row-text-content {
        width: 100%;
        display: flex;
        flex-direction: column;
      }

      & .widget-eyebrow {
        margin-block-end: var(--space-md);
      }

      & .widget-title {
        margin-block-end: var(--space-lg);
      }

      & .widget-description {
        margin-block-end: var(--space-lg);

        &:last-child {
          margin-block-end: 0;
        }
      }

      & .widget-actions {
        margin-block-start: var(--space-xl);
      }

      @media (min-width: 990px) {
        & .rows-wrapper {
          gap: var(--space-6xl);
        }

        & .feature-row {
          flex-direction: row;
          gap: var(--space-5xl);

          &:nth-child(even) {
            {% if widget.settings.first_image_position == 'left' %}
              flex-direction: row-reverse;
            {% endif %}
          }

          &:nth-child(odd) {
            {% if widget.settings.first_image_position == 'right' %}
              flex-direction: row-reverse;
            {% endif %}
          }
        }

        & .row-image-wrapper,
        & .row-text-content {
          width: 50%;
        }
      }
    }
  </style>

  <div class="widget-container {% if widget.settings.color_scheme == 'dark' %}widget-container-padded{% endif %}">
    {% if widget.settings.title != blank or widget.settings.eyebrow != blank or widget.settings.description != blank %}
      <div class="widget-header">
        {% if widget.settings.eyebrow != blank %}
          <span class="widget-eyebrow" data-setting="eyebrow">{{ widget.settings.eyebrow }}</span>
        {% endif %}
        {% if widget.settings.title != blank %}
          <h2 class="widget-headline" data-setting="title">{{ widget.settings.title }}</h2>
        {% endif %}
        {% if widget.settings.description != blank %}
          <p class="widget-description" data-setting="description">{{ widget.settings.description }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="widget-content">
      <div class="rows-wrapper">
      {% for blockId in widget.blocksOrder %}
        {% assign block = widget.blocks[blockId] %}
        {% if block.type == 'row' %}
          <div class="feature-row" data-block-id="{{ blockId }}">
            <div class="row-image-wrapper">
              {% if block.settings.image != blank %}
                {{ block.settings.image | image: 'large', 'feature-image' }}
              {% else %}
                {% placeholder_image %}
              {% endif %}
            </div>

            <div class="row-text-content">
              {% if block.settings.eyebrow != blank %}
                <span class="widget-eyebrow block-text block-text-sm block-text-uppercase block-text-muted" data-setting="eyebrow">{{ block.settings.eyebrow }}</span>
              {% endif %}

              {% if block.settings.heading != blank %}
                <h3 class="widget-title block-text block-text-2xl block-text-bold block-text-heading" data-setting="heading">{{ block.settings.heading }}</h3>
              {% endif %}

              {% if block.settings.text != blank %}
                <p class="widget-description block-text block-text-base block-text-muted" data-setting="text">{{ block.settings.text }}</p>
              {% endif %}

              {% if block.settings.button_link.text != blank %}
                <div class="widget-actions">
                  <a
                    href="{{ block.settings.button_link.href }}"
                    class="widget-button widget-button-secondary"
                    data-setting="button_link"
                    {% if block.settings.button_link.target == '_blank' %}
                      target="_blank" rel="noopener"
                    {% endif %}
                  >
                    {{ block.settings.button_link.text }}
                  </a>
                </div>
              {% endif %}
            </div>
          </div>
        {% endif %}
      {% endfor %}
      </div>
    </div>
  </div>
</section>
