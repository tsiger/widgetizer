<header id="{{ widget.id }}" class="widget widget-site-header color-scheme-{{ widget.settings.color_scheme }}{% if widget.settings.sticky %} header-sticky{% endif %}" data-widget-id="{{ widget.id }}" data-widget-type="header"{% if widget.settings.color_scheme == 'highlight' %} style="--widget-bg-color: var(--bg-primary);"{% endif %}>

  <style>
    .widget-site-header .header-logo-image {
      max-width: {{ widget.settings.logoMaxWidth | default: 150 }}px;
      height: auto;
      display: block;
    }
    .widget-site-header .header-logo img[src$=".svg"],
    .widget-site-header .header-logo-image[src$=".svg"] {
      width: auto;
      height: auto;
      max-height: {{ widget.settings.logoMaxWidth | default: 150 }}px;
      min-height: 40px;
      object-fit: contain;
      vertical-align: middle;
    }
    .widget-site-header .header-logo {
      line-height: 0;
    }
    .widget-site-header .header-logo img {
      display: inline-block;
    }
    {% unless widget.settings.full_width %}
    .widget-site-header .header-inner {
      max-width: var(--container-max-width);
      margin-inline: auto;
    }
    {% endunless %}
  </style>

  <div class="header-inner">
    <div class="header-branding">
      <a href="index.html" class="header-logo">
        {% if widget.settings.logoImage != blank %}
          {% image src: widget.settings.logoImage, size: 'medium', class: 'header-logo-image', lazy: false %}
        {% else %}
          <span data-setting="logoText">{{ widget.settings.logoText | default: 'Widgetizer' }}</span>
        {% endif %}
      </a>

      {% if widget.settings.contactDetailsLine1 != blank or widget.settings.contactDetailsLine2 != blank %}
        <div class="header-contact">
          {% if widget.settings.contactDetailsLine1 != blank %}
            <span class="header-contact-line" data-setting="contactDetailsLine1">
              {{ widget.settings.contactDetailsLine1 }}
            </span>
          {% endif %}
          {% if widget.settings.contactDetailsLine2 != blank %}
            <span class="header-contact-line" data-setting="contactDetailsLine2">
              {{ widget.settings.contactDetailsLine2 }}
            </span>
          {% endif %}
        </div>
      {% endif %}
    </div>

    <div class="header-actions">
      <nav class="header-nav" id="main-navigation" aria-label="Primary">
        <div class="nav-close">
          <span class="nav-close-title">Menu</span>
          <button type="button" class="nav-close-btn" aria-label="Close navigation menu">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M18 6l-12 12" />
              <path d="M6 6l12 12" />
            </svg>
          </button>
        </div>
        {% if widget.settings.headerNavigation %}
          {% render 'menu',
            menu: widget.settings.headerNavigation,
            skip_nav: true,
            class_list: 'nav-list',
            class_item: 'nav-item',
            class_link: '',
            class_submenu: 'nav-submenu',
            class_has_submenu: 'has-submenu'
          %}
        {% endif %}
        {% if widget.settings.ctaButtonLink.text != blank %}
          <a href="{{ widget.settings.ctaButtonLink.href | default: '#' }}" class="widget-button widget-button-full widget-button-large mobile-cta" {% if widget.settings.ctaButtonLink.target == '_blank' %}target="_blank" rel="noopener noreferrer"{% endif %}>
            {{ widget.settings.ctaButtonLink.text }}
          </a>
        {% endif %}
        {% if widget.settings.contactDetailsLine1 != blank or widget.settings.contactDetailsLine2 != blank %}
          <div class="header-contact header-contact-mobile">
            {% if widget.settings.contactDetailsLine1 != blank %}
              <span class="header-contact-line" data-setting="contactDetailsLine1">
                {{ widget.settings.contactDetailsLine1 }}
              </span>
            {% endif %}
            {% if widget.settings.contactDetailsLine2 != blank %}
              <span class="header-contact-line" data-setting="contactDetailsLine2">
                {{ widget.settings.contactDetailsLine2 }}
              </span>
            {% endif %}
          </div>
        {% endif %}
      </nav>

      {% if widget.settings.ctaButtonLink.text != blank %}
      <a href="{{ widget.settings.ctaButtonLink.href | default: '#' }}" class="widget-button desktop-cta" {% if widget.settings.ctaButtonLink.target == '_blank' %}target="_blank" rel="noopener noreferrer"{% endif %}>
        {{ widget.settings.ctaButtonLink.text }}
      </a>
      {% endif %}

      <button
        type="button"
        class="menu-toggle"
        aria-label="Toggle navigation menu"
        aria-expanded="false"
        aria-controls="main-navigation"
      >
        <svg
          class="icon-menu"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M4 6l16 0" />
          <path d="M4 12l16 0" />
          <path d="M4 18l16 0" />
        </svg>
        <svg
          class="icon-close"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M18 6l-12 12" />
          <path d="M6 6l12 12" />
        </svg>
      </button>
    </div>
  </div>
</header>
