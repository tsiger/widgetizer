<section
  id="{{ widget.id }}"
  class="widget widget-menu"
  data-widget-id="{{ widget.id }}"
  data-widget-type="menu"
>
  <style>
    #{{ widget.id }} {
      & .menu-list {
        display: flex;
        flex-direction: column;
        gap: 0;
      }

      & .menu-item {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: var(--space-md);
        padding: var(--space-lg) 0;
        border-block-end: var(--border-width-thin) solid var(--border-light);
        align-items: start;
      }

      & .menu-item:first-child {
        border-block-start: var(--border-width-thin) solid var(--border-light);
      }

      & .menu-item.is-featured {
        background: linear-gradient(90deg, var(--color-accent-subtle) 0%, transparent 100%);
        margin-inline: calc(var(--space-md) * -1);
        padding-inline: var(--space-md);
        border-radius: var(--radius-sm);
      }

      & .menu-item-content {
        display: flex;
        flex-direction: column;
        gap: var(--space-xs);
      }

      & .menu-item-header {
        display: flex;
        align-items: center;
        gap: var(--space-sm);
        flex-wrap: wrap;
      }

      & .menu-item-name {
        font-size: var(--font-size-lg);
        font-weight: var(--font-weight-semibold);
        margin: 0;
      }

      & .menu-item-badges {
        display: flex;
        gap: var(--space-xs);
        flex-wrap: wrap;
      }

      & .menu-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 1.5rem;
        height: 1.5rem;
        border-radius: 50%;
        font-size: 0.7rem;
        font-weight: var(--font-weight-bold);
        text-transform: uppercase;
      }

      & .menu-badge-vegetarian { background: #22c55e; color: white; }
      & .menu-badge-vegan { background: #16a34a; color: white; }
      & .menu-badge-gluten-free { background: #f59e0b; color: white; }
      & .menu-badge-dairy-free { background: #3b82f6; color: white; }
      & .menu-badge-nut-free { background: #8b5cf6; color: white; }
      & .menu-badge-spicy { background: #ef4444; color: white; }
      & .menu-badge-halal { background: #06b6d4; color: white; }
      & .menu-badge-kosher { background: #6366f1; color: white; }

      & .menu-item-description {
        color: var(--text-muted);
        font-size: var(--font-size-sm);
        margin: 0;
        max-width: 60ch;
      }

      & .menu-item-price {
        font-size: var(--font-size-lg);
        font-weight: var(--font-weight-bold);
        color: var(--text-primary);
        white-space: nowrap;
      }

      & .menu-item-image {
        width: 80px;
        height: 80px;
        object-fit: cover;
        border-radius: var(--radius-sm);
        margin-inline-start: var(--space-md);
      }

      & .menu-item-right {
        display: flex;
        align-items: center;
        gap: var(--space-md);
      }

      @media (max-width: 600px) {
        & .menu-item {
          grid-template-columns: 1fr;
        }

        & .menu-item-right {
          justify-content: space-between;
          margin-block-start: var(--space-sm);
        }

        & .menu-item-image {
          width: 60px;
          height: 60px;
        }
      }
    }
  </style>

  <div class="widget-container">
    {% if widget.settings.title != blank or widget.settings.description != blank or widget.settings.eyebrow != blank %}
      <div class="widget-header">
        {% if widget.settings.eyebrow != blank %}
          <span class="widget-eyebrow" data-setting="eyebrow">{{ widget.settings.eyebrow }}</span>
        {% endif %}
        {% if widget.settings.title != blank %}
          <h2 class="widget-title" data-setting="title">{{ widget.settings.title }}</h2>
        {% endif %}
        {% if widget.settings.description != blank %}
          <p class="widget-description" data-setting="description">{{ widget.settings.description }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="widget-content">
      <div class="menu-list">
        {% for blockId in widget.blocksOrder %}
          {% assign block = widget.blocks[blockId] %}
          <div class="menu-item {% if block.settings.featured %}is-featured{% endif %}" data-block-id="{{ blockId }}">
            <div class="menu-item-content">
              <div class="menu-item-header">
                {% if block.settings.name != blank %}
                  <h3 class="menu-item-name" data-setting="name">{{ block.settings.name }}</h3>
                {% endif %}
                <div class="menu-badge-group">
                  {% if block.settings.vegetarian %}
                    <span class="menu-badge menu-badge-vegetarian" title="Vegetarian">V</span>
                  {% endif %}
                  {% if block.settings.vegan %}
                    <span class="menu-badge menu-badge-vegan" title="Vegan">VG</span>
                  {% endif %}
                  {% if block.settings.gluten_free %}
                    <span class="menu-badge menu-badge-gluten-free" title="Gluten-Free">GF</span>
                  {% endif %}
                  {% if block.settings.dairy_free %}
                    <span class="menu-badge menu-badge-dairy-free" title="Dairy-Free">DF</span>
                  {% endif %}
                  {% if block.settings.nut_free %}
                    <span class="menu-badge menu-badge-nut-free" title="Nut-Free">NF</span>
                  {% endif %}
                  {% if block.settings.spicy %}
                    <span class="menu-badge menu-badge-spicy" title="Spicy">ðŸŒ¶</span>
                  {% endif %}
                  {% if block.settings.halal %}
                    <span class="menu-badge menu-badge-halal" title="Halal">H</span>
                  {% endif %}
                  {% if block.settings.kosher %}
                    <span class="menu-badge menu-badge-kosher" title="Kosher">K</span>
                  {% endif %}
                </div>
              </div>
              {% if block.settings.description != blank %}
                <p class="menu-item-description" data-setting="description">{{ block.settings.description }}</p>
              {% endif %}
            </div>
            <div class="menu-item-right">
              {% if block.settings.price != blank %}
                <span class="menu-item-price" data-setting="price">{{ block.settings.price }}</span>
              {% endif %}
              {% if block.settings.image != blank %}
                {{ block.settings.image | image: 'small', 'menu-item-image' }}
              {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>
