<section
  id="{{ widget.id }}"
  class="widget widget-type-profile-grid widget-{{ widget.id }} color-scheme-{{ widget.settings.color_scheme }}"
  {% if widget.settings.color_scheme == 'dark' %}
    style="--widget-bg-color: var(--bg-primary);"
  {% endif %}
  data-widget-id="{{ widget.id }}"
  data-widget-type="profile-grid"
  {% if widget.index != null %}data-widget-index="{{ widget.index }}"{% endif %}
>
  <style>
    .widget-{{ widget.id }} {
      /* Profile-specific styles */
      & .profile-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      & .profile-image {
        width: 16rem; /* 160px */
        height: 16rem;
        border-radius: 50%;
        object-fit: cover;
        margin-block-end: var(--space-md);
        border: var(--border-width-medium) solid var(--border-color);
      }

      & .profile-image-placeholder {
        width: 16rem;
        height: 16rem;
        border-radius: 50%;
        background: var(--bg-secondary);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-block-end: var(--space-md);
        border: var(--border-width-medium) solid var(--border-color);
      }

      & .profile-name {
        margin-block-end: var(--space-xs);
      }

      & .profile-role {
        margin-block-end: var(--space-xs);
      }

      & .profile-specialty {
        margin-block-end: var(--space-sm);
      }

      & .profile-bio {
        margin-block-end: var(--space-md);
        max-width: 30rem; /* 300px */
      }

      & .profile-social {
        display: flex;
        gap: var(--space-sm);
        justify-content: center;
        margin-block-start: var(--space-md);
      }

      & .profile-social-link {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 3.6rem; /* 36px */
        height: 3.6rem;
        border-radius: 50%;
        border: var(--border-width-thin) solid var(--border-color);
        color: var(--text-content);
        text-decoration: none;
        transition: all var(--transition-speed-normal);

        &:hover {
          border-color: var(--accent);
          color: var(--accent);
        }

        svg {
          width: 1.8rem; /* 18px */
          height: 1.8rem;
        }
      }

      /* Smart layout for different item counts */
    }
  </style>

  <div class="widget-container {% if widget.settings.color_scheme == 'dark' %}widget-container-padded{% endif %}">
    {% if widget.settings.title != blank or widget.settings.description != blank or widget.settings.eyebrow != blank %}
      <div class="widget-header">
        {% if widget.settings.eyebrow != blank %}
          <span class="widget-eyebrow" data-setting="eyebrow">{{ widget.settings.eyebrow }}</span>
        {% endif %}
        {% if widget.settings.title != blank %}
          {% if widget.index == 1 %}
            <h1 class="widget-headline" data-setting="title">{{ widget.settings.title }}</h1>
          {% else %}
            <h2 class="widget-headline" data-setting="title">{{ widget.settings.title }}</h2>
          {% endif %}
        {% endif %}
        {% if widget.settings.description != blank %}
          <p class="widget-description" data-setting="description">{{ widget.settings.description }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="widget-content">
      <ul
        class="widget-card-grid widget-grid"
        style="--grid-cols-desktop: {{ widget.settings.columns_desktop }};"
      >
        {% assign item_heading_level = 'h3' %}
        {% if widget.settings.title == blank %}
          {% assign item_heading_level = 'h2' %}
        {% endif %}

        {% for blockId in widget.blocksOrder %}
          {% assign block = widget.blocks[blockId] %}
          <li class="profile-card" data-block-id="{{ blockId }}">
            {% if block.settings.photo != blank and block.settings.photo != 'placeholder' %}
              {{ block.settings.photo | image: 'medium', 'profile-image' }}
            {% else %}
              <div class="profile-image-placeholder block-text block-text-4xl block-text-muted" style="background-image: url({% placeholder_image 'square', 'url' %}); background-size: cover; background-position: center;"></div>
            {% endif %}

            {% if block.settings.name != blank %}
              <{{ item_heading_level }} class="profile-name block-text block-text-xl block-text-bold block-text-heading" data-setting="name">{{ block.settings.name }}</{{ item_heading_level }}>
            {% endif %}

            {% if block.settings.role != blank %}
              <p class="profile-role block-text block-text-base block-text-semibold block-text-accent" data-setting="role">{{ block.settings.role }}</p>
            {% endif %}

            {% if block.settings.specialty != blank %}
              <p class="profile-specialty block-text block-text-sm block-text-muted" data-setting="specialty">{{ block.settings.specialty }}</p>
            {% endif %}

            {% if block.settings.bio != blank %}
              <p class="profile-bio block-text block-text-sm" data-setting="bio">{{ block.settings.bio }}</p>
            {% endif %}

            {% assign has_social = false %}
            {% if block.settings.linkedin != blank or block.settings.twitter != blank or block.settings.instagram != blank or block.settings.facebook != blank or block.settings.email != blank or block.settings.github != blank or block.settings.youtube != blank or block.settings.tiktok != blank or block.settings.pinterest != blank or block.settings.bluesky != blank or block.settings.discord != blank or block.settings.meta != blank or block.settings.reddit != blank or block.settings.telegram != blank or block.settings.threads != blank or block.settings.whatsapp != blank %}
              {% assign has_social = true %}
            {% endif %}

            {% if has_social %}
              <div class="profile-social">
                {% if block.settings.linkedin != blank %}
                  <a href="{{ block.settings.linkedin }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="LinkedIn" data-setting="linkedin">
                    {% render 'icon', icon: 'linkedin' %}
                  </a>
                {% endif %}
                {% if block.settings.twitter != blank %}
                  <a href="{{ block.settings.twitter }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="Twitter" data-setting="twitter">
                    {% render 'icon', icon: 'twitter' %}
                  </a>
                {% endif %}
                {% if block.settings.instagram != blank %}
                  <a href="{{ block.settings.instagram }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="Instagram" data-setting="instagram">
                    {% render 'icon', icon: 'instagram' %}
                  </a>
                {% endif %}
                {% if block.settings.facebook != blank %}
                  <a href="{{ block.settings.facebook }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="Facebook" data-setting="facebook">
                    {% render 'icon', icon: 'facebook' %}
                  </a>
                {% endif %}
                {% if block.settings.email != blank %}
                  <a href="mailto:{{ block.settings.email }}" class="profile-social-link" aria-label="Email" data-setting="email">
                    {% render 'icon', icon: 'mail' %}
                  </a>
                {% endif %}
                {% if block.settings.github != blank %}
                  <a href="{{ block.settings.github }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="GitHub" data-setting="github">
                    {% render 'icon', icon: 'github' %}
                  </a>
                {% endif %}
                {% if block.settings.youtube != blank %}
                  <a href="{{ block.settings.youtube }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="YouTube" data-setting="youtube">
                    {% render 'icon', icon: 'youtube' %}
                  </a>
                {% endif %}
                {% if block.settings.tiktok != blank %}
                  <a href="{{ block.settings.tiktok }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="TikTok" data-setting="tiktok">
                    {% render 'icon', icon: 'tiktok' %}
                  </a>
                {% endif %}
                {% if block.settings.pinterest != blank %}
                  <a href="{{ block.settings.pinterest }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="Pinterest" data-setting="pinterest">
                    {% render 'icon', icon: 'pinterest' %}
                  </a>
                {% endif %}
                {% if block.settings.bluesky != blank %}
                  <a href="{{ block.settings.bluesky }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="Bluesky" data-setting="bluesky">
                    {% render 'icon', icon: 'bluesky' %}
                  </a>
                {% endif %}
                {% if block.settings.discord != blank %}
                  <a href="{{ block.settings.discord }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="Discord" data-setting="discord">
                    {% render 'icon', icon: 'discord' %}
                  </a>
                {% endif %}
                {% if block.settings.meta != blank %}
                  <a href="{{ block.settings.meta }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="Meta" data-setting="meta">
                    {% render 'icon', icon: 'meta' %}
                  </a>
                {% endif %}
                {% if block.settings.reddit != blank %}
                  <a href="{{ block.settings.reddit }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="Reddit" data-setting="reddit">
                    {% render 'icon', icon: 'reddit' %}
                  </a>
                {% endif %}
                {% if block.settings.telegram != blank %}
                  <a href="{{ block.settings.telegram }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="Telegram" data-setting="telegram">
                    {% render 'icon', icon: 'telegram' %}
                  </a>
                {% endif %}
                {% if block.settings.threads != blank %}
                  <a href="{{ block.settings.threads }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="Threads" data-setting="threads">
                    {% render 'icon', icon: 'threads' %}
                  </a>
                {% endif %}
                {% if block.settings.whatsapp != blank %}
                  <a href="{{ block.settings.whatsapp }}" class="profile-social-link" target="_blank" rel="noopener" aria-label="WhatsApp" data-setting="whatsapp">
                    {% render 'icon', icon: 'whatsapp' %}
                  </a>
                {% endif %}
              </div>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
</section>
