<section
  id="{{ widget.id }}"
  class="widget widget-type-testimonial-hero widget-{{ widget.id }} color-scheme-{{ widget.settings.color_scheme }} {% if widget.settings.image_position == 'left' %}layout-image-left{% endif %}"
  {% if widget.settings.color_scheme == 'highlight' %}
    style="--widget-bg-color: var(--bg-primary);"
  {% endif %}
  data-widget-id="{{ widget.id }}"
  data-widget-type="testimonial-hero"
  {% if widget.index != null %}data-widget-index="{{ widget.index }}"{% endif %}
>
  <style>
    .widget-{{ widget.id }} {
      & .testimonial-hero-wrapper {
        display: flex;
        flex-direction: column;
        gap: var(--space-3xl);
        align-items: stretch;
      }

      & .testimonial-content {
        display: flex;
        flex-direction: column;
        gap: var(--space-xl);
      }

      & .testimonial-logo {
        max-width: 20rem;
        height: auto;
        display: block;
      }

      & .testimonial-image-wrapper {
        width: 100%;
        position: relative;
        overflow: hidden;

        & img {
          width: 100%;
          height: auto;
          display: block;
          border: var(--border-width-thin) solid var(--border-color);
        }
      }

      @media (min-width: 990px) {
        & .testimonial-hero-wrapper {
          display: grid;
          grid-template-columns: repeat(2, minmax(0, 1fr));
          gap: var(--space-4xl);
          align-items: stretch;
        }

        & .testimonial-content,
        & .testimonial-image-wrapper {
          width: 100%;
        }

        & .testimonial-content {
          height: 100%;
        }

        & .testimonial-content-bottom {
          margin-block-start: auto;
        }

        /* Image left variant */
        &.layout-image-left .testimonial-hero-wrapper {
          & .testimonial-content {
            order: 2;
          }

          & .testimonial-image-wrapper {
            order: 1;
          }
        }
      }
    }
  </style>

  <div class="widget-container {% if widget.settings.color_scheme == 'highlight' %}widget-container-padded{% endif %}">
    <div class="widget-content">
      <div class="testimonial-hero-wrapper">
        <div class="testimonial-content">
          <div class="testimonial-content-top">
            {% if widget.settings.logo != blank %}
              <div class="testimonial-logo-wrapper reveal reveal-fade">
                {{ widget.settings.logo | image: 'medium', 'testimonial-logo', false }}
              </div>
            {% endif %}
          </div>

          <div class="testimonial-content-bottom content-flow widget-content-align-start">
            {% for blockId in widget.blocksOrder %}
              {% assign block = widget.blocks[blockId] %}
              {% case block.type %}
                {% when 'heading' %}
                  {% assign size_class = 'block-text-' | append: block.settings.size %}
                  {% if widget.index == 1 %}
                    <h1 class="widget-title block-text {{ size_class }} block-text-heading-weight block-text-heading reveal reveal-up" style="--reveal-delay: {{ forloop.index0 }}" data-block-id="{{ blockId }}" data-setting="text">
                      {{ block.settings.text }}
                    </h1>
                  {% else %}
                    <h2 class="widget-title block-text {{ size_class }} block-text-heading-weight block-text-heading reveal reveal-up" style="--reveal-delay: {{ forloop.index0 }}" data-block-id="{{ blockId }}" data-setting="text">
                      {{ block.settings.text }}
                    </h2>
                  {% endif %}
                {% when 'text' %}
                  {% assign size_class = 'block-text-' | append: block.settings.size %}
                  {% assign style_class = '' %}
                  {% if block.settings.uppercase %}{% assign style_class = style_class | append: ' block-text-uppercase' %}{% endif %}
                  {% if block.settings.muted %}{% assign style_class = style_class | append: ' block-text-muted' %}{% endif %}
                  <div class="widget-description block-text block-rte {{ size_class }}{{ style_class }} reveal reveal-up" style="--reveal-delay: {{ forloop.index0 }}" data-block-id="{{ blockId }}" data-setting="text">
                    {{ block.settings.text }}
                  </div>
              {% endcase %}
            {% endfor %}
          </div>
        </div>

        {% if widget.settings.author_image != blank %}
          <div class="testimonial-image-wrapper reveal reveal-fade">
            {{ widget.settings.author_image | image: 'large', 'testimonial-author-image', false }}
          </div>
        {% else %}
          <div class="testimonial-image-wrapper reveal reveal-fade">
            {% placeholder_image %}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>
