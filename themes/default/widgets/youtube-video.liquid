<section
  class="youtube-video-widget"
  data-widget-id="{{ widget.id }}"
  data-widget-type="youtube-video"
>
  <style>
    #{{ widget.id }}.youtube-video-container {
      padding: {{ widget.settings.padding | default: 20 }}px;
      background-color: {{ widget.settings.backgroundColor | default: '#ffffff' }};
      text-align: {{ widget.settings.alignment | default: 'center' }};
    }

    #{{ widget.id }} .youtube-video-wrapper {
      position: relative;
      width: 100%;
      max-width: {{ widget.settings.maxWidth | default: 800 }}px;
      margin: 0 auto;
    }

    #{{ widget.id }} .youtube-video-responsive {
      position: relative;
      width: 100%;
      height: 0;
      padding-bottom: 56.25%; /* 16:9 aspect ratio */
      overflow: hidden;
      border-radius: {{ widget.settings.borderRadius | default: 8 }}px;
    }

    #{{ widget.id }} .youtube-video-responsive iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }

    #{{ widget.id }} .youtube-video-title {
      font-size: {{ widget.settings.titleSize | default: 24 }}px;
      font-weight: 600;
      color: {{ widget.settings.titleColor | default: '#1f2937' }};
      margin-bottom: 16px;
      line-height: 1.3;
    }

    #{{ widget.id }} .youtube-video-description {
      font-size: {{ widget.settings.descriptionSize | default: 16 }}px;
      color: {{ widget.settings.descriptionColor | default: '#6b7280' }};
      margin-top: 16px;
      line-height: 1.5;
    }

    #{{ widget.id }} .youtube-video-placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 315px;
      background-color: #f3f4f6;
      border: 2px dashed #d1d5db;
      border-radius: {{ widget.settings.borderRadius | default: 8 }}px;
      color: #6b7280;
      font-size: 16px;
    }
  </style>

  <div id="{{ widget.id }}" class="youtube-video-container">
    {% if widget.settings.title != blank %}
      <h2 class="youtube-video-title">{{ widget.settings.title }}</h2>
    {% endif %}

    <div class="youtube-video-wrapper">
      {% if widget.settings.youtubeVideo != blank and widget.settings.youtubeVideo.videoId %}
        <div class="youtube-video-responsive">
          {{ widget.settings.youtubeVideo | youtube: 'width=100%,height=100%' }}
        </div>
      {% else %}
        <div class="youtube-video-placeholder">
          <p>Select a YouTube video to display</p>
        </div>
      {% endif %}
    </div>

    {% if widget.settings.description != blank %}
      <p class="youtube-video-description">{{ widget.settings.description }}</p>
    {% endif %}
  </div>

  <script type="application/json" data-widget-schema>
    {
      "type": "youtube-video",
      "displayName": "YouTube Video",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Video Title",
          "description": "Optional title to display above the video",
          "default": ""
        },
        {
          "type": "youtube",
          "id": "youtubeVideo",
          "label": "YouTube Video",
          "description": "Paste any YouTube URL or video ID",
          "default": null,
          "embedOptions": {
            "autoplay": false,
            "controls": true,
            "mute": false,
            "loop": false,
            "modestbranding": true,
            "rel": false
          }
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Video Description",
          "description": "Optional description to display below the video",
          "default": ""
        },
        {
          "type": "select",
          "id": "alignment",
          "label": "Video Alignment",
          "default": "center",
          "options": [
            { "value": "left", "label": "Left" },
            { "value": "center", "label": "Center" },
            { "value": "right", "label": "Right" }
          ]
        },
        {
          "type": "range",
          "id": "maxWidth",
          "label": "Maximum Width",
          "default": 800,
          "min": 300,
          "max": 1200,
          "step": 50,
          "unit": "px",
          "description": "Maximum width of the video container"
        },
        {
          "type": "range",
          "id": "borderRadius",
          "label": "Border Radius",
          "default": 8,
          "min": 0,
          "max": 20,
          "step": 2,
          "unit": "px"
        },
        {
          "type": "color",
          "id": "backgroundColor",
          "label": "Background Color",
          "default": "#ffffff"
        },
        {
          "type": "color",
          "id": "titleColor",
          "label": "Title Color",
          "default": "#1f2937"
        },
        {
          "type": "range",
          "id": "titleSize",
          "label": "Title Font Size",
          "default": 24,
          "min": 16,
          "max": 48,
          "step": 2,
          "unit": "px"
        },
        {
          "type": "color",
          "id": "descriptionColor",
          "label": "Description Color",
          "default": "#6b7280"
        },
        {
          "type": "range",
          "id": "descriptionSize",
          "label": "Description Font Size",
          "default": 16,
          "min": 12,
          "max": 24,
          "step": 1,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "padding",
          "label": "Container Padding",
          "default": 20,
          "min": 0,
          "max": 60,
          "step": 5,
          "unit": "px"
        }
      ]
    }
  </script>
</section>