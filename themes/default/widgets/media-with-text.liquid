<section
	class="media-with-text"
	data-widget-id="{{ widget.id }}"
	data-widget-type="media-with-text"
>
	{% comment %} Basic CSS - Can be moved to a separate file later {% endcomment %}
	<style>
		#{{ widget.id }}.media-with-text__container {
			display: flex;
			gap: 20px; /* Space between image and text */
			align-items: center; /* Align items vertically */
			padding: {{ widget.settings.padding | default: 20 }}px; /* Example: Add padding setting later if needed */
			background-color: {{ widget.settings.backgroundColor | default: '#ffffff' }}; /* Example: Add color setting later */
		}

		/* Default: Image Left */
		#{{ widget.id }}.media-with-text__container--image-left {
			flex-direction: row;
		}

		/* Image Right */
		#{{ widget.id }}.media-with-text__container--image-right {
			flex-direction: row-reverse;
		}

		#{{ widget.id }} .media-with-text__image-area {
			flex: 1; /* Adjust flex basis as needed */
			max-width: 50%; /* Prevent image from taking too much space */
		}

		#{{ widget.id }} .media-with-text__image {
			display: block;
			width: 100%;
			height: auto;
		}

		#{{ widget.id }} .media-with-text__content-area {
			flex: 1; /* Adjust flex basis as needed */
		}

		#{{ widget.id }} .media-with-text__block {
			margin-bottom: 15px; /* Space between blocks */
		}

		#{{ widget.id }} .media-with-text__block--heading h3 {
			font-size: 1.5rem; /* Example size */
			margin: 0 0 10px 0;
			color: #333;
		}

		#{{ widget.id }} .media-with-text__block--text p {
			font-size: 1rem; /* Example size */
			line-height: 1.5;
			margin: 0;
			color: #666;
		}

		#{{ widget.id }} .media-with-text__block--button .button {
			display: inline-block;
			padding: 10px 20px;
			background-color: #007bff; /* Example color */
			color: white;
			text-decoration: none;
			border-radius: 4px;
			transition: background-color 0.3s ease;
		}
		#{{ widget.id }} .media-with-text__block--button .button:hover {
			background-color: #0056b3;
		}

	</style>

	<div
		id="{{ widget.id }}"
		class="media-with-text__container media-with-text__container--image-{{ widget.settings.imagePosition | default: 'left' }}"
	>
		<div class="media-with-text__image-area">
			{% comment %} Placeholder for image - Add image setting later {% endcomment %}
			{% if widget.settings.widgetImage != blank %}
				{% assign widgetImageFilename = widget.settings.widgetImage | split: '/' | last %}
				{% assign widgetImageData = mediaMetadata[widgetImageFilename] %}
				<img
					src="{{ imagePath }}/{{ widgetImageFilename }}"
					class="media-with-text__image"
					{% if widgetImageData %}
						alt="{{ widgetImageData.alt | default: 'Media image' }}"
						title="{{ widgetImageData.title }}"
						width="{{ widgetImageData.width }}"
						height="{{ widgetImageData.height }}"
					{% endif %}
				>
			{% else %}
				<img src="https://placehold.co/600x400?text=Hello+World" alt="Placeholder Image" class="media-with-text__image">
			{% endif %}
		</div>

		<div class="media-with-text__content-area">
			{% if widget.blocks.size > 0 %}
				{% for blockId in widget.blocksOrder %}
					{% assign block = widget.blocks[blockId] %}
					<div class="media-with-text__block media-with-text__block--{{ block.type }}" data-block-id="{{ blockId }}">
						{% if block.type == 'heading' %}
							<h3>{{ block.settings.headingText }}</h3>
						{% elsif block.type == 'text' %}
							<p>{{ block.settings.text }}</p>
						{% elsif block.type == 'button' %}
							<a href="{{ block.settings.link | default: '#' }}" class="button">
								{{ block.settings.label | default: 'Click Me' }}
							</a>
						{% endif %}
					</div>
				{% endfor %}
			{% else %}
				<p>Add content blocks (Heading, Text, Button) here.</p>
			{% endif %}
		</div>
	</div>

	<script type="application/json" data-widget-schema>
		{
			"type": "media-with-text",
			"displayName": "Media with Text",
			"settings": [
				{
					"type": "image",
					"id": "widgetImage",
					"label": "Image",
					"description": "The main image for the section",
					"default": ""
				},
				{
					"type": "select",
					"id": "imagePosition",
					"label": "Image Position",
					"description": "Position of the image relative to the text content.",
					"default": "left",
					"options": [
						{ "value": "left", "label": "Left" },
						{ "value": "right", "label": "Right" }
					]
				},
				{
					"type": "color",
					"id": "backgroundColor",
					"label": "Background Color",
					"default": "#ffffff"
				},
				{
					"type": "range",
					"id": "padding",
					"label": "Padding",
					"default": 20,
					"min": 0,
					"max": 100,
					"step": 5
				}
			],
			"blocks": [
				{
					"type": "heading",
					"displayName": "Heading",
					"settings": [
						{
							"type": "text",
							"id": "headingText",
							"label": "Heading Text",
							"description": "The text for the heading",
							"default": "Section Heading"
						}
					]
				},
				{
					"type": "text",
					"displayName": "Text",
					"settings": [
						{
							"type": "textarea",
							"id": "text",
							"label": "Text",
							"description": "The main text content",
							"default": "This is a paragraph describing the media content."
						}
					]
				},
				{
					"type": "button",
					"displayName": "Button",
					"settings": [
						{
							"type": "text",
							"id": "label",
							"label": "Button Label",
							"description": "The text displayed on the button",
							"default": "Learn More"
						},
						{
							"type": "text",
							"id": "link",
							"label": "Button Link URL",
							"description": "The URL the button links to",
							"default": "#"
						}
					]
				}
			]
		}
	</script>
</section>